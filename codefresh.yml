---
  version: "1.0"
  steps:
    test-step:
      fail-fast: "false"
      image: "node:latest"
      working-directory: ${{initial-clone}}
      commands:
        - "npm install -g better-npm-run"
        - "npm install -g mocha"
        - "npm install"
        - "npm test"

    publish-npm:
          fail-fast: "false"
          image: "node:latest"
          commands:
            - "npm install -g gulp"
            - "gulp npm"

    build-docker-image:
             type: "build"
             fail-fast: false
             dockerfile: "Dockerfile"
             image-name: "verchol/cf-cli"
             tag: "latest"
